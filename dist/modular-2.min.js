"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Modular={data:{bindings:{},renderedEvent:new Event("mRendered"),onRender:new Event("mOnRender"),errors:{0:["Info","You are using the development build of Modular-2. Make sure to use the production build when deploying this app."],1:["Invalid Attribute","Unable to create Modular element.","Invalid attribute.","The attribute \"__config__\" is reserved for Modular.","el"],2:["Invalid Input","An object, which is not a Modular-element, was passed into Modular.core.getHtml().","( Modular.core.getHtml() was called by Modular.render() )","Modular does not know how how to handle this.","core.getHtml"],3:["Invalid Input","A value, which is not a [String], [Number], [Element] (html), [Function], [Object] or [Array], was passed into Modular.core.getHtml().","( Modular.core.getHtml() was called by Modular.render() )","This error might be caused by a invalid child-element in Modular.render() or Modular.el().","Modular does not know how how to handle this.","core.getHtml"],4:["Invalid or Missing Input","Unable to scan.","A invalid value was passed into Modular.scan().","Modular.scan() expects a [String].","scan"],5:["Missing TagName","Unable to create Modular element.","Missing tag.","( The tag of a Modular-element is the first attribute of Modular.el() )","el"],6:["Invalid Style","Unable to convert given value to inline style.","A value passed into Modular.core.getStyle() could not be converted into inline style.","Modular.core.getStyle() expects a [String] (already containing inline style), an [Object] (containing valid style) or a [Funtion] (returning an object that contains valid style)","core.getStyle","el"],7:["Invalid Input","Unable to render.","Modular.render() is missing a root-element or a container-element","( A root-element can be: a [Modular-element], [String], [Number], [Element] (html), [Array] (which conatins any of the mentioned) or [Function] (which returns any of the mentioned) )","A container-element has to be an html-element or a valid CSS-selector ( [String] ).","Keep in mind - if the container-element is not a child of the page, you propably won't be able to see much.","render"],8:["Invalid Render-Container","Unable to render","Modular.render() recieved an invalid container-element.","A container-element has to be an html-element or a valid CSS-selector ( [String] ).","Keep in mind - if the container-element is not a child of the page, you propably won't be able to see much.","render"],9:["Unknown Binding-Name","Unable to set binding.","Modular.setBinding() recieved an unknown binding-name.","Bindings are created during render - maybe you should try setting the binding after Modular.render() is called.","The \"mRendered\" event might help with timing.","setBinding"],10:["Unknown Binding-Name","Could not find binding.","Modular.getBinding() recieved an unknown binding-name.","Bindings are created during render - maybe you should try getting the binding after Modular.render() is called.","The \"mRendered\" event might help with timing.","getBinding"],11:["Unknown Binding-Name","Could not find binding.","Modular.listenBinding() recieved an unknown binding-name.","Bindings are created during render - maybe you should try listening the binding after Modular.render() is called.","The \"mRendered\" event might help with timing.","listenBinding"]}},getBinding:function getBinding(a){if(!Modular.data.bindings[a])throw Modular.core.err(10);return Modular.data.bindings[a].value},setBinding:function setBinding(a,b){if(!Modular.data.bindings[a])throw Modular.core.err(9);Modular.data.bindings[a].lastValue=Modular.data.bindings[a].value,Modular.data.bindings[a].value=b,Modular.data.bindings[a].elements.map(function(c){c.element[c.value]=Modular.data.bindings[a].value})},listenBinding:function listenBinding(a,b){if(!Modular.data.bindings[a])throw Modular.core.err(11);Modular.data.bindings[a].listeners.push(b)},core:{err:function err(a){var b=Modular.data.errors[a],c="["+b[0]+"]";b.shift();var d=1<b.length?"\n@ Modular."+b.pop()+"()\n":"",f=b.map(function(g){return"\n--> "+g+"\n"}).join("");return"\uD83D\uDEA8 (Modular-2): "+c+"\n"+f+d},getAttr:function getAttr(a){var b={};return Array.from(a).map(function(c){b[c.name]=c.value}),b},getHtml:function getHtml(a){if(a=a||"",a instanceof Element)return a;if(a.constructor===Function)return Modular.core.getHtml(a());if(a.constructor===Array){if(!a.length)return Modular.core.getHtml("");var b=document.createElement("div");return a.map(function(c){return b.appendChild(Modular.core.getHtml(c))}),b}if(a.constructor===String||a.constructor===Number)return document.createTextNode(a);if(a.constructor===Object){if(a.__config__&&"modular-element"!==a.__config__.type)throw Modular.core.err(2);return a.__config__.render()}throw Modular.core.err(3)},getStyle:function getStyle(a){var b=a;if("function"==typeof b&&(b=b()),"object"===("undefined"==typeof b?"undefined":_typeof(b))){var c=document.createElement("div");Object.assign(c.style,b),b=c.getAttribute("style")}if("string"!=typeof b)throw new Error(Modular.core.err(6));return b},makeEl:function makeEl(a,b,c){var d=document.createElement(a);return b&&b.style&&(b.style=Modular.core.getStyle(b.style)),Object.assign(d,b),c&&d.appendChild(c),d}},el:function el(){var a=Array.from(arguments),b=a[0].toLowerCase(),c=a[1]||{};if(a.splice(0,2),1===a.length&&(a=a[0]),"string"!=typeof b)throw new Error(Modular.core.err(5));if(void 0!==c.__config__)throw Error(Modular.core.err(1));return c.__config__={type:"modular-element",tag:b,content:a,bindings:c.$bind,element:null},c.__config__.render=function(){var d={};return Object.assign(d,c||{}),delete d.__config__,delete d.$bind,c.__config__.element=Modular.core.makeEl(c.__config__.tag,d,Modular.core.getHtml(c.__config__.content)),"object"===_typeof(c.__config__.bindings)&&(c.__config__.change=function(){Object.entries(c.__config__.bindings).map(function(f){var g=c.__config__.element[f[0]];"true"==g?g=!0:"false"==g&&(g=!1),Modular.setBinding(f[1],g),(Modular.data.bindings[f[1]].value!==Modular.data.bindings[f[1]].lastValue||"object"===_typeof(Modular.data.bindings[f[1]].value)||"array"==typeof Modular.data.bindings[f[1]].value)&&Modular.data.bindings[f[1]].listeners.map(function(h){h(Modular.getBinding(f[1]))})})},Object.entries(c.__config__.bindings).map(function(f){Modular.data.bindings[f[1]]||(Modular.data.bindings[f[1]]={elements:[],lastValue:void 0,value:void 0,listeners:[]}),Modular.data.bindings[f[1]].elements.push({element:c.__config__.element,value:f[0]})}),c.__config__.element.addEventListener("mouseover",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("mouseout",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("click",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("change",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("keyup",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("keydown",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("scroll",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("contextmenu",function(f){return c.__config__.change(f)}),c.__config__.change()),c.__config__.element},c},scan:function scan(a){if("string"!=typeof a)throw new Error(Modular.core.err(4));var b=document.createElement("div");b.innerHTML=a.trim();var c=Array.from(b.childNodes).map(function(d){return d instanceof Element?(isOnlyText=!1,Modular.el(d.tagName,Modular.core.getAttr(d.attributes),Modular.scan(d.innerHTML))):d.textContent});return c},render:function render(a,b){if(window.dispatchEvent(Modular.data.onRender),!a||!b)throw new Error(Modular.core.err(7));var c;if(c="string"==typeof b?document.querySelector(b):b,!(c instanceof Element))throw Modular.core.err(8);c.innerHTML="",c.appendChild(Modular.core.getHtml(a)),window.dispatchEvent(Modular.data.renderedEvent)}};console.warn(Modular.core.err(0));