/*Jonas Karg 2018*/"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function mel(){var a=Array.from(arguments),b=a[0],c=a[1];if(a.splice(0,2),"string"!=typeof b)throw Modular.core.err(10,"Invalid or missing tag attibute.","el");if(c&&"object"===_typeof(c.style)){var d=document.createElement("div");Object.assign(d.style,c.style),c.style=d.getAttribute("style")}return{type:"modular-element",tag:b,attributes:c||{},content:a}}var Modular={data:{wrapper:document.createElement("div"),renderedEvent:new Event("mRendered"),ERRORS:{0:"Unknown Error",1:"Syntax Error",10:"Invalid/Missing configuration",11:"Invalid insert",12:"Invalid component",13:"Invalid component-instance",14:"Invalid element-content",15:"Invalid passed-in value"}},core:{err:function err(){var d,a=Array.from(arguments),b="",c="";return a[0].constructor===Number&&(b=" ["+Modular.data.ERRORS[a[0]]+"]",a.shift()),1<a.length&&(c="\n--> @ Modular."+a.pop()+"()"),d=a.map(function(f){return"\n--> "+f}),new Error("(Modular)"+b+":"+d+"\n"+c+"\n")},info:function info(){for(var a=Array.from(arguments),c=0;c<arguments.length-1;c++)"--> "+a[c]+"\n";return b+="\n--> @ "+a[a.length-1]+"()",b},isElement:function isElement(a){try{return a instanceof HTMLElement}catch(b){return"object"===("undefined"==typeof a?"undefined":_typeof(a))&&1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},getProps:function getProps(arr){var obj={};return arr.map(function(el){var temp=el.split("="),key=temp[0],val=temp[1];"\""==val[0]||"'"==val[0]?val=val.substring(1,val.length-1):"{"==val[0]&&(val=eval(val.substring(1,val.length-1))),obj[key]=val}),obj},toHtml:function toHtml(a){return Modular.data.wrapper.innerHTML=null,Modular.data.wrapper.appendChild(a),Modular.data.wrapper.innerHTML},getVariable:function getVariable(name){if(/[^0-9]\w*/.test(name)){var value=window[name];if(!value)try{value=eval(name)}catch(a){return}return value}},getStr:function getStr(a){if(!a)return null;if(a.constructor===String||a.constructor===Number)return a;if(a instanceof Element)return a.outerHTML;if(a.constructor===Function)return Modular.core.getStr(a());if(a.constructor===Object){if("modular-element"===a.type)return Modular.core.renderElement(a);throw Modular.core.err(15,"core.getStr")}if(a.constructor===Array)return a.map(function(b){return Modular.core.getStr(b)}).join("");throw Modular.core.err(15,"Value must be of type String, Number or Object","core.getStr")},renderElement:function renderElement(a){var b="";if(a.constructor===Function)b=Modular.core.getStr(a())||"";else{if(a.constructor!==Object||"modular-element"!==a.type)throw Modular.core.err(10,"Invalid element.","Must be of type Object or Function.","Create with Modular.el()","core.renderElement");var c;a.tag[0]==a.tag[0].toUpperCase()&&(c=Modular.core.getVariable(a.tag)),b=c?c.constructor===Function?Modular.core.getStr(c(a.attributes||{})||""):Modular.core.getStr(c)||"":Modular.core.tag(a.tag,a.attributes,Modular.core.getStr(a.content)||"")}return b},tag:function tag(a,b,c){var d="";return b&&(d=" "+Object.entries(b).map(function(f){return f[0]+"=\""+f[1]+"\""}).join(" ")),element="<"+a+d+">"+c+"</"+a+">",element}},el:mel,render:function render(a,b){if(!a||!b)throw Modular.core.err(10,"Missing element or container.","render");var c;if(c="string"==typeof b?document.querySelector(b):b,!Modular.core.isElement(c))throw Modular.core.err(10,"Invalid container","Container must be an HTML-element or a valid selector-string.","render");c.innerHTML=Modular.core.getStr(a),window.dispatchEvent(Modular.data.renderedEvent)}};