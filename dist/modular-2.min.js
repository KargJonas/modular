"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Modular={data:{bindings:{},renderedEvent:new Event("mRendered"),onRender:new Event("mOnRender"),ERRORS:{0:["Info","You are using the development build of Modular-2. Make sure to use the production build when deploying this app."],1:["Invalid Attribute","Unable to create Modular element.","Invalid attribute.","The attribute \"__config__\" is reserved for Modular.","The invalid caller might look something like this: Modular.el(\"[...]\", { __config__: [...] }, [...]);","el"],2:["Invalid Input","An object, which is not a Modular-element, was passed into Modular.core.getHtml().","( Modular.core.getHtml() was called by Modular.render() )","Modular does not know how how to handle this.","core.getHtml"],3:["Invalid Input","A value, which is not a [String], [Number], [Element] (html), [Function], [Object] or [Array], was passed into Modular.core.getHtml().","( Modular.core.getHtml() was called by Modular.render() )","This error might be caused by a invalid child-element in Modular.render() or Modular.el().","Modular does not know how how to handle this.","core.getHtml"],4:["Invalid or missing Input","Unable to scan.","A value, which is not a [String] was passed into Modular.scan().","Modular.scan() expects a [String].","scan"],5:["Missing Input","Unable to create Modular element.","Missing tag.","( The tag of a Modular-element is the first attribute of Modular.el() )","el"],6:["Invalid Input","Unable to convert given value to inline style.","A value passed into Modular.core.getStyle() could not be converted into inline style.","Modular.core.getStyle() expects a [String] (already containing inline style), an [Object] (containing valid style) or a [Funtion] (returning an object that contains valid style)","core.getStyle","el"],7:["Invalid Input","Unable to render.","Modular.render() is missing a root-element or a container-element","( A root-element can be: a [Modular-element], [String], [Number], [Element] (html), [Array] (which conatins any of the mentioned) [Function] (which returns any of the mentioned) )","A container-element has to be a valid DOM-element, which can be found in your HTML-Document or a [String] containing a valid CSS-selector","render"],8:["Invalid Input","Unable to render","Modular.render() recieved an invalid container-element.","A container-element has to be a html-element, or a [String], containing a valid CSS-selector.","Keep in mind - if the element is not a child of <html>, you won't be able to see much.","render"]}},getBinding:function getBinding(a){var b=Modular.data.bindings[a];return b?b.value:void 0},setBinding:function setBinding(a,b){Modular.data.bindings[a]||(Modular.data.bindings[a]={value:void 0,elements:[],listeners:[],change:function change(c){Modular.data.bindings[a].listeners.map(function(d){d(Modular.data.bindings[a].value,c)})}}),Modular.data.bindings[a].value=b,Modular.data.bindings[a].change()},listenBinding:function listenBinding(a,b){Modular.data.bindings[a]||Modular.setBinding(a,void 0),Modular.data.bindings[a].listeners.push(b)},core:{err:function err(a){var b=Modular.data.ERRORS[a],c="["+b[0]+"]";b.shift();var d=1<b.length?"\n@ Modular."+b.pop()+"()":"",f=b.map(function(g){return"\n--> "+g+"\n"}).join("");return"\uD83D\uDEA8 (Modular-2): "+c+"\n"+f+"\n"+d+"\n"},getAttr:function getAttr(a){var b={};return Array.from(a).map(function(c){b[c.name]=c.value}),b},getHtml:function getHtml(a,b){if(!a)return null;var c;if(a instanceof Element)c=a;else if(a.constructor===Function)c=Modular.core.getHtml(a());else if(a.constructor===Array)c=document.createElement("div"),a.map(function(d){return c.appendChild(Modular.core.getHtml(d))});else if(a.constructor===String||a.constructor===Number)c=document.createTextNode(a);else if(!(a.constructor===Object))throw Modular.core.err(3);else if(a.__config__&&"modular-element"===a.__config__.type)a.__config__.render(),c=a.__config__.element;else throw Modular.core.err(2);return b?void b.appendChild(c):c},getStyle:function getStyle(a){var b=a;if("function"==typeof b&&(b=b()),"object"===("undefined"==typeof b?"undefined":_typeof(b))){var c=document.createElement("div");Object.assign(c.style,b),b=c.getAttribute("style")}if("string"!=typeof b)throw new Error(Modular.core.err(6));return b},makeEl:function makeEl(a,b,c){var d=document.createElement(a),f={};return Object.assign(f,b||{}),delete f.__config__,f.style&&(f.style=Modular.core.getStyle(f.style)),Object.assign(d,f),c&&d.appendChild(c),d}},el:function el(){var a=Array.from(arguments),b=a[0],c=a[1]||{};if(a.splice(0,2),1===a.length&&(a=a[0]),"string"!=typeof b)throw new Error(Modular.core.err(5));if(void 0!==c.__config__)throw Error(Modular.core.err(1));return c.__config__={type:"modular-element",tag:b,content:a,binding:c.$bind,value:c.value||a,element:null},delete c.$bind,c.__config__.render=function(){var d=c.__config__.binding;return c.__config__.element=Modular.core.makeEl(c.__config__.tag,c,Modular.core.getHtml(c.__config__.content)),d&&(c.__config__.element.addEventListener("click",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("change",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("hover",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("keyup",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("keydown",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("scroll",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("mouseover",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("mouseout",function(f){return c.__config__.change(f)}),c.__config__.element.addEventListener("contextmenu",function(f){return c.__config__.change(f)}),Modular.setBinding(d,c.__config__.value),Modular.listenBinding(d,function(f){Modular.data.bindings[d].elements.map(function(g){"INPUT"==g.tagName?g.value=f:g.innerHTML=f})}),c.__config__.change=function(){c.__config__.value=c.__config__.element.value||c.__config__.element.innerHTML,Modular.data.bindings[d].value=c.__config__.value,Modular.data.bindings[d].change()},Modular.data.bindings[d].elements.push(c.__config__.element),Modular.data.bindings[d].change()),c.__config__.element},c},scan:function scan(a){if("string"!=typeof a)throw new Error(Modular.data.ERRORS[4]);var b=document.createElement("div");b.innerHTML=a.trim();var c=Array.from(b.childNodes).map(function(d){return d instanceof Element?(isOnlyText=!1,Modular.el(d.tagName,Modular.core.getAttr(d.attributes),Modular.scan(d.innerHTML))):d.textContent});return c},render:function render(a,b){if(window.dispatchEvent(Modular.data.onRender),!a||!b)throw new Error(Modular.core.err(7));var c;if(c="string"==typeof b?document.querySelector(b):b,!(c instanceof Element))throw Modular.core.err(8);Modular.core.getHtml(a,c),window.dispatchEvent(Modular.data.renderedEvent)}};console.warn(Modular.core.err(0));